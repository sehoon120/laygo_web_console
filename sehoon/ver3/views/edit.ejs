<% /* eslint-disable */ %>

<%- include('./include/_header') %>

  <!-- íŒŒì¼ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸° ë²„íŠ¼ (ì™¼ìª½ ìƒë‹¨) -->

  <!-- ==================================================================================================== -->

  <!-- Main -->
  <main id="site-main" class="container my-4">
    <a href="/main?path=<%= encodeURIComponent(currentPath) %>" class="back-button">
      <i class="fas fa-arrow-left"></i> íŒŒì¼ ëª©ë¡
    </a>
    <div class="row">

      <!-- ì™¼ìª½ ì˜ì—­: ê¸€ ì‘ì„± -->
      <div class="col-md-6">
        <h2>
          <%= file.filename %>
        </h2>
        <form id="editForm" action="/main/<%= file._id %>/edit?_method=PUT&path=<%= encodeURIComponent(currentPath) %>"
          method="POST">
          <div class="mb-3">
            <!-- textareaì— ê¸°ë³¸ file.content ê°’ ì±„ì›Œë„£ê¸° -->
            <textarea name="content" class="form-control" rows="48"
              placeholder="Write your code here"><%= file.content %></textarea>
          </div>
          <!-- âœ… Generate ìŠ¤ìœ„ì¹˜ ì¶”ê°€ -->
          <div class="form-check form-switch mb-3">
            <input class="form-check-input" type="checkbox" id="generateSwitch" name="generate" value="on" form="editForm">
            <label class="form-check-label" for="generateSwitch">Generate (Save í›„ ì‹¤í–‰)</label>
          </div>

          <!-- âœ… Save ë²„íŠ¼ ìˆ˜ì • -->
          <button type="submit" class="btn btn-primary" form="editForm">Save</button>

          <!-- âœ… Layout Draw ë²„íŠ¼ ë¶„ë¦¬ -->
          <button id="layoutDrawBtn" type="button" class="btn btn-secondary mt-2">Layout Draw</button>

          <!-- <button type="submit" class="btn btn-primary">Save & Generate</button> -->
        </form>
        <!-- ì €ì¥ ê²°ê³¼ ë©”ì‹œì§€ ì¶œë ¥ ì˜ì—­ -->
        <div id="message" class="mt-3"></div>
      </div>

      <!-- ì˜¤ë¥¸ìª½ ì˜ì—­: ì´ë¯¸ì§€ í‘œì‹œ ë° ì¶”ê°€ ì…ë ¥ë€ -->
      <div class="col-md-6">
        <h2>Layout</h2>

        <!-- ì˜¤ë¥¸ìª½ ìƒë‹¨ì— ì…ë ¥ë€ ì¶”ê°€ -->
        <div class="row">
          <div class="col-md-6">
            <div class="mb-3">
              <label for="yamlFileInput">libname</label>
              <input type="text" id="yamlFileInput" name="yamlFile" class="form-control" placeholder="logic_generated"
                form="editForm">
            </div>
          </div>
          <div class="col-md-6">
            <div class="mb-3">
              <label for="cellNameInput">cellname</label>
              <input type="text" id="cellNameInput" name="cellname" class="form-control" placeholder="cellname"
                form="editForm">
            </div>
          </div>
        </div>

        <div class="text-center">
          <!-- ê¸°ì¡´ ì´ë¯¸ì§€ ëŒ€ì‹  ìº”ë²„ìŠ¤ ì¶”ê°€ -->
          <canvas id="canvas" width="770" height="1080" style="border:1px solid #ccc; background:#fff;"></canvas>
        </div>
      </div>

    </div>

    <!-- í„°ë¯¸ë„ ì˜ì—­: ë¡œê·¸ íŒŒì¼ ë‚´ìš©ì„ í‘œì‹œ -->
    <div id="terminal"
      style="background-color: black; color: lime; font-family: monospace; padding: 10px; height: 300px; overflow-y: auto; margin-top: 20px;">
      <!-- ë¡œê·¸ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
    </div>
  </main>
  <!-- /Main -->


  <!-- ==================================================================================================== -->

  <!-- ìº”ë²„ìŠ¤ ê¸°ëŠ¥ ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ -->


  <script>
    document.addEventListener("DOMContentLoaded", function() {

      // ================================================================================
      // ì„ì˜ë¡œ ì¶”ê°€í•œê²ƒ
      // ë ˆì´ì•„ì›ƒ ê·¸ë¦¬ê¸° ë²„íŠ¼ ê´€ë ¨
      // document.getElementById("layoutDrawBtn").addEventListener("click", async function () {
      //   const cellname = document.getElementById("cellNameInput").value.trim() || 'cellname';
      //   const libname = document.getElementById("yamlFileInput").value.trim() || 'logic_generated';
      //   const messageDiv = document.getElementById("message");

      //   if (!cellname || !libname) {
      //     messageDiv.innerText = "libnameê³¼ cellnameì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";
      //     return;
      //   }

      //   const fileId = "<%= file._id %>";
      //   const currentPathEncoded = encodeURIComponent("<%= currentPath %>");
      //   const lib = encodeURIComponent(libname);
      //   const cell = encodeURIComponent(cellname);

      //   try {
      //     const response = await fetch(`/main/${fileId}/edit/draw?path=${currentPathEncoded}&libname=${lib}&cellname=${cell}`, {
      //       method: 'GET'  // âœ… GETìœ¼ë¡œ ë³€ê²½
      //     });

      //     const text = await response.text();
      //     let result;
      //     try {
      //       result = JSON.parse(text);
      //     } catch (parseErr) {
      //       console.error("ì„œë²„ ì‘ë‹µì´ JSONì´ ì•„ë‹˜:", text);
      //       messageDiv.innerText = "ì„œë²„ì—ì„œ JSON ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.";
      //       return;
      //     }

      //     if (response.ok && result.success && result.drawObjectDoc) {
      //       rectList = [];
      //       buildMap(result.drawObjectDoc, cellname, libname);
      //       redraw();
      //       messageDiv.innerText = "Layout ê·¸ë¦¬ê¸° ì™„ë£Œ";
      //     } else {
      //       messageDiv.innerText = result.message || "Layout ì‹¤íŒ¨";
      //     }
      //   } catch (error) {
      //     console.error("Layout draw ìš”ì²­ ì¤‘ ì—ëŸ¬:", error);
      //     messageDiv.innerText = "ì—ëŸ¬ ë°œìƒ";
      //   }
      // });

      

      // ================================================================================

      // ì„œë²„ì—ì„œ ì „ë‹¬ëœ drawObjectDocì„ ì „ì—­ ë³€ìˆ˜ë¡œ ì„¤ì • (ë¹ˆ ê°ì²´ë©´ {})
      var drawObjectDoc = (<%- JSON.stringify(drawObjectDoc || {}) %>);
      // console.log("drawObjectDoc:", drawObjectDoc);
    
      // ìº”ë²„ìŠ¤ ë° ì „ì—­ ë³€ìˆ˜ ì„ ì–¸
      var rectList = [];
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
    
      // ìº”ë²„ìŠ¤ì˜ ë³€í™˜ ìƒíƒœë¥¼ ì¶”ì í•˜ëŠ” í•¨ìˆ˜
      function trackTransforms(ctx) {
        var svg = document.createElementNS("http://www.w3.org/2000/svg", 'svg');
        var xform = svg.createSVGMatrix();
        ctx.getTransform = function () { return xform; };
    
        var savedTransforms = [];
        var save = ctx.save;
        ctx.save = function () {
          savedTransforms.push(xform.translate(0, 0));
          return save.call(ctx);
        };
        var restore = ctx.restore;
        ctx.restore = function () {
          xform = savedTransforms.pop();
          return restore.call(ctx);
        };
    
        var scale = ctx.scale;
        ctx.scale = function (sx, sy) {
          xform = xform.scaleNonUniform(sx, sy);
          return scale.call(ctx, sx, sy);
        };
        var rotate = ctx.rotate;
        ctx.rotate = function (radians) {
          xform = xform.rotate(radians * 180 / Math.PI);
          return rotate.call(ctx, radians);
        };
        var translate = ctx.translate;
        ctx.translate = function (dx, dy) {
          xform = xform.translate(dx, dy);
          return translate.call(ctx, dx, dy);
        };
        var transform = ctx.transform;
        ctx.transform = function (a, b, c, d, e, f) {
          var m2 = svg.createSVGMatrix();
          m2.a = a; m2.b = b; m2.c = c; m2.d = d; m2.e = e; m2.f = f;
          xform = xform.multiply(m2);
          return transform.call(ctx, a, b, c, d, e, f);
        };
        var setTransform = ctx.setTransform;
        ctx.setTransform = function (a, b, c, d, e, f) {
          xform.a = a;
          xform.b = b;
          xform.c = c;
          xform.d = d;
          xform.e = e;
          xform.f = f;
          return setTransform.call(ctx, a, b, c, d, e, f);
        };
        var pt = svg.createSVGPoint();
        ctx.transformedPoint = function (x, y) {
          pt.x = x; pt.y = y;
          return pt.matrixTransform(xform.inverse());
        }
      }
      trackTransforms(ctx);
      // ctx.translate(-385, 540);
      ctx.translate(-385 * 0.05, 1080 - 540 * 0.05);
      ctx.scale(0.05, 0.05);
      ctx.beginPath();
    
      // ì „ì—­ í•¨ìˆ˜ buildMap ë“±ë¡ (window.buildMap)
      window.buildMap = function(docs, cellname, libname) {
        const parent_obj = docs[libname] && docs[libname][cellname];
        if (!parent_obj) {
          console.error("buildMap: docs[" + libname + "][" + cellname + "] is undefined.");
          return;
        }
        for (let child_obj_key in parent_obj) {
          if (child_obj_key === 'masks') {
            const masks = parent_obj[child_obj_key];
            for (let mask_layer_name in masks) {
              const mask_layer = masks[mask_layer_name];
              mask_layer.forEach(mask => {
                let originX = mask[0][0] * 5;
                let originY = mask[0][1] * 5;
                let width = (mask[1][0] - mask[0][0]) * 5;
                let height = (mask[1][1] - mask[0][1]) * 5;
                rectList.push([originX, -originY, width, -height, "rgba(255, 0, 0, 0.5)", mask_layer_name, true, 'mask']);
              });
            }
          } else if (child_obj_key === 'pins') {
            const pins = parent_obj[child_obj_key];
            for (let pin_name in pins) {
              let pin = pins[pin_name];
              let originX = pin['xy'][0][0] * 5;
              let originY = pin['xy'][0][1] * 5;
              let width = (pin['xy'][1][0] - pin['xy'][0][0]) * 5;
              let height = (pin['xy'][1][1] - pin['xy'][0][1]) * 5;
              rectList.push([originX, -originY, width, -height, "rgba(0,255,0, 0.5)", pin_name, true, 'pin']);
            }
          } else if (child_obj_key === 'subblocks') {
            const subblocks = parent_obj[child_obj_key];
            for (let subblock_name in subblocks) {
              let subblock = subblocks[subblock_name];
              if(subblock['libname'] == 'gpdk045_microtemplates_dense'){        //GPDK045ê°€ ì•„ë‹Œ ê²½ìš°ì— ëŒ€í•´ ë‚˜ì¤‘ì— ìˆ˜ì •. íƒ€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œë„ "*microtempates*" í˜•íƒœì˜ ì´ë¦„ì¸ì§€ í™•ì¸ í•„ìš”
                if(subblock['transform']=='MX'){
                  let originX = subblock['xy'][0] * 5;
                  let originY = subblock['xy'][1] * 5 - subblock['size'][1] * 5;
                  let width = subblock['size'][0] * 5;
                  let height = subblock['size'][1] * 5;
                  rectList.push([originX, -originY, width, -height, "rgba(0, 0, 0, 1.0)", subblock_name, true, 'subblock']);
                }else{
                  let originX = subblock['xy'][0] * 5;
                  let originY = subblock['xy'][1] * 5;
                  let width = subblock['size'][0] * 5;
                  let height = subblock['size'][1] * 5;
                  rectList.push([originX, -originY, width, -height, "rgba(0, 0, 0, 1.0)", subblock_name, true, 'subblock']);
                }
              }else{
                if(subblock['transform']=='MX'){
                  let subblock_called = docs['logic_generated'][subblock['cellname']];
                  let originX = subblock['xy'][0] * 5;
                  let originY = subblock['xy'][1] * 5 - subblock_called['bbox'][1][1] * 5;
                  let width = subblock_called['bbox'][1][0] * 5;
                  let height = subblock_called['bbox'][1][1] * 5;
                  rectList.push([originX, -originY, width, -height, "rgba(0, 0, 0, 1.0)", subblock_name, true, 'subblock']);
                }else{
                  let subblock_called = docs['logic_generated'][subblock['cellname']];
                  let originX = subblock['xy'][0] * 5;
                  let originY = subblock['xy'][1] * 5;
                  let width = subblock_called['bbox'][1][0] * 5;
                  let height = subblock_called['bbox'][1][1] * 5;
                  rectList.push([originX, -originY, width, -height, "rgba(0, 0, 0, 1.0)", subblock_name, true, 'subblock']);
                }
                
              }               
            }
          }
        }
      };

      function drawOriginAxes() {
        ctx.save();
        ctx.strokeStyle = '#0077cc';
        ctx.lineWidth = 20;

        const LONG = 100000;

        // Xì¶•: y=0, ì¢Œìš° ì „ì²´ ê·¸ë¦¬ê¸°
        ctx.beginPath();
        ctx.moveTo(385 - LONG, 540);  // ì‹œì‘ì : ì™¼ìª½ìœ¼ë¡œ
        ctx.lineTo(385 + LONG, 540);   // ëì : ì˜¤ë¥¸ìª½ìœ¼ë¡œ
        ctx.stroke();

        // Yì¶•: x=0, ìœ„ì•„ë˜ ì „ì²´ ê·¸ë¦¬ê¸°
        ctx.beginPath();
        ctx.moveTo(385, 540 - LONG);  // ì‹œì‘ì : ìœ„ìª½ìœ¼ë¡œ
        ctx.lineTo(385, 540 + LONG);   // ëì : ì•„ë˜ìª½ìœ¼ë¡œ
        ctx.stroke();

        ctx.restore();
      }

    
      // ìº”ë²„ìŠ¤ ì¬ë Œë”ë§ í•¨ìˆ˜
      function redraw() {
        ctx.save();
        ctx.setTransform(1, 0, 0, 1, 0, 0);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.restore();

          // === origin ì¶• í‘œì‹œ ===
        ctx.save();
        ctx.beginPath();
        ctx.lineWidth = 1;
        ctx.strokeStyle = "#444";  // ì—°í•œ íšŒìƒ‰
        const pt0 = ctx.transformedPoint(0, 0);
        const ptX1 = ctx.transformedPoint(canvas.width, 0);
        const ptY1 = ctx.transformedPoint(0, canvas.height);

        drawOriginAxes(); 
        
        rectList.forEach(rect => {
          if (rect[6]) {
            if (rect[7] === 'subblock') {
              ctx.lineWidth = 10;
              ctx.strokeStyle = rect[4];
              ctx.fillStyle = rect[4];
              ctx.strokeRect(rect[0], rect[1], rect[2], rect[3]);
              ctx.font = "400px Verdana";
              ctx.fillText(rect[5], rect[0] + rect[2] / 2 - 200, rect[1] + rect[3] / 2 - 200);
            } else if (rect[7] === 'pin') {
              ctx.fillStyle = rect[4];
              ctx.fillRect(rect[0], rect[1], rect[2], rect[3]);
              ctx.fillStyle = 'rgba(255, 0, 0, 1.0)';
              ctx.font = "400px Verdana";
              ctx.fillText(rect[5], rect[0] + rect[2] / 2 - 200, rect[1] + rect[3] / 2 - 200);
            } else { // mask
              ctx.fillStyle = rect[4];
              ctx.fillRect(rect[0], rect[1], rect[2], rect[3]);
            }
          }
        });
      }
      redraw();
    
      // ìº”ë²„ìŠ¤ ë“œë˜ê·¸ ë° ì¤Œ ì¸í„°ë™ì…˜ ì²˜ë¦¬
      let lastX = canvas.width / 2, lastY = canvas.height / 2;
      let dragStart, dragged;
      canvas.addEventListener('mousedown', function (evt) {
        document.body.style.userSelect = 'none';
        lastX = evt.offsetX;
        lastY = evt.offsetY;
        dragStart = ctx.transformedPoint(lastX, lastY);
        dragged = false;
      });
      canvas.addEventListener('mousemove', function (evt) {
        lastX = evt.offsetX;
        lastY = evt.offsetY;
        dragged = true;
        if (dragStart) {
          let pt = ctx.transformedPoint(lastX, lastY);
          ctx.translate(pt.x - dragStart.x, pt.y - dragStart.y);
          redraw();
        }
      });
      canvas.addEventListener('mouseup', function (evt) {
        dragStart = null;
        if (!dragged) zoom(evt.shiftKey ? -1 : 1);
      });
      const scaleFactor = 1.1;
      function zoom(clicks) {
        let pt = ctx.transformedPoint(lastX, lastY);
        ctx.translate(pt.x, pt.y);
        let factor = Math.pow(scaleFactor, clicks);
        ctx.scale(factor, factor);
        ctx.translate(-pt.x, -pt.y);
        redraw();
      }
      function handleScroll(evt) {
        let delta = evt.wheelDelta ? evt.wheelDelta / 40 : evt.detail ? -evt.detail : 0;
        if (delta) zoom(delta);
        evt.preventDefault();
        return false;
      }
      canvas.addEventListener('DOMMouseScroll', handleScroll, false);
      canvas.addEventListener('mousewheel', handleScroll, false);
    
      // í¼ ì œì¶œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (AJAX)
      document.getElementById("editForm").addEventListener("submit", async function (e) {
        e.preventDefault();
        console.log("í¼ ì œì¶œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì‹¤í–‰ë¨");
        // í¼ ì œì¶œ ì‹œ ìµœì‹  ì…ë ¥ê°’ ì½ê¸°
        const cellname = document.getElementById("cellNameInput").value || 'cellname';
        const libname = document.getElementById("yamlFileInput").value || 'logic_generated';
        // console.log("Submitted cellname:", cellname);
        // console.log("Submitted libname:", libname);
    
        const form = e.target;
        const formData = new FormData(form);
        const data = new URLSearchParams();
        for (const pair of formData) {
          data.append(pair[0], pair[1]);
        }
        try {
          const response = await fetch(form.action, {
            method: 'PUT',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
            body: data,
            credentials: 'include'
          });
          const result = await response.json();
          console.log("AJAX ì‘ë‹µ:", result);
          let messageDiv = document.getElementById("message");
          // if (response.ok && result.success) {
          //   messageDiv.innerText = "ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.";
          //   if (result.drawObjectDoc) {
          //     rectList = [];
          //     buildMap(result.drawObjectDoc, cellname, libname);
          //     redraw();
          //   }
          // } 
          if (response.ok && result.success) {    // switchì— ë”°ë¼ ë‹¤ë¥¸ ì‘ë‹µ
            const generateSwitch = document.getElementById("generateSwitch");
            if (generateSwitch && generateSwitch.checked) {
              messageDiv.innerText = "Generate ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.";
            } else {
              messageDiv.innerText = "ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.";
            }

            // if (result.drawObjectDoc) {
            //   rectList = [];
            //   buildMap(result.drawObjectDoc, cellname, libname);
            //   redraw();
            // }
            // Saveì—ì„  layoutì„ ì ˆëŒ€ ê·¸ë¦¬ì§€ ì•Šë„ë¡
            // if (result.drawObjectDoc && result.libname && result.cellname) {
            //   rectList = [];
            //   buildMap(result.drawObjectDoc, result.cellname, result.libname);
            //   redraw();
            // }
          } 
          else {
            messageDiv.innerText = "ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";
          }
          messageDiv.style.opacity = 1;
          setTimeout(() => {
            messageDiv.style.transition = "opacity 0.5s ease-out";
            messageDiv.style.opacity = 0;
          }, 2000);
        } catch (error) {
          let messageDiv = document.getElementById("message");
          messageDiv.innerText = "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
          messageDiv.style.opacity = 1;
          setTimeout(() => {
            messageDiv.style.transition = "opacity 0.5s ease-out";
            messageDiv.style.opacity = 0;
          }, 2000);
          console.error(error);
        }
      });
    

      document.getElementById("layoutDrawBtn").addEventListener("click", async function () {
        console.log("ğŸ“ Layout Draw ë²„íŠ¼ í´ë¦­ë¨");

        // í•„ìš”í•œ ì…ë ¥ê°’ ì¶”ì¶œ
        const cellname = document.getElementById("cellNameInput").value || 'cellname';
        const libname = document.getElementById("yamlFileInput").value || 'logic_generated';

        const form = document.getElementById("editForm");
        const formData = new FormData(form);

        const data = new URLSearchParams();
        for (const pair of formData) {
          data.append(pair[0], pair[1]);
        }

        try {
          const response = await fetch(`${form.action}/draw`, {   // âœ… draw ì „ìš© ë¼ìš°í„° í˜¸ì¶œ
            method: 'POST',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
            body: data,
            credentials: 'include'
          });

          const result = await response.json();
          console.log("ğŸ¯ Layout Draw ì‘ë‹µ:", result);

          const messageDiv = document.getElementById("message");
          if (response.ok && result.drawObjectDoc) {
            const { drawObjectDoc, cellname, libname } = result;
            const messageDiv = document.getElementById("message");

            if (
              drawObjectDoc.hasOwnProperty(libname) &&
              drawObjectDoc[libname].hasOwnProperty(cellname)
            ) {
              setTimeout(() => {
                messageDiv.innerText = 'âœ… Layout Draw ì„±ê³µ';
              }, 2000); // 2ì´ˆ í›„ì— ë©”ì‹œì§€ ì œê±°

              // messageDiv.innerText = "âœ… Layout Draw ì„±ê³µ";
              rectList = [];
              buildMap(drawObjectDoc, cellname, libname);
              redraw();
            } else {
              setTimeout(() => {
                messageDiv.innerText = `âš ï¸ Layout Draw ì‹¤íŒ¨: ${libname} / ${cellname} ì—†ìŒ`;
              }, 2000);
              // messageDiv.innerText = `âš ï¸ Layout Draw ì‹¤íŒ¨: ${libname} / ${cellname} ì—†ìŒ`;
              console.warn(`drawObjectDoc[${libname}][${cellname}] is undefined`);
            }
          }
        } catch (error) {
          console.error("âŒ Layout Draw ì˜¤ë¥˜:", error);
          document.getElementById("message").innerText = "ì„œë²„ ì˜¤ë¥˜ë¡œ Layoutì„ ê·¸ë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
        }
      });


      // í„°ë¯¸ë„ ì˜ì—­ í´ë§ (2ì´ˆ ê°„ê²©)
      setInterval(async () => {
        try {
          const fileId = "<%= file._id %>";
          const response = await fetch(`/main/${fileId}/edit/logs`, { credentials: 'include' });
          if (!response.ok) {
            console.error("ë¡œê·¸ íŒŒì¼ ìš”ì²­ ì‹¤íŒ¨:", response.status);
          }
          const text = await response.text();
          try {
            const result = JSON.parse(text);
            document.getElementById("terminal").innerText = result.log;
          } catch (parseError) {
            console.error("JSON íŒŒì‹± ì—ëŸ¬:", parseError);
          }
        } catch (error) {
          console.error("ë¡œê·¸ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì—ëŸ¬ ë°œìƒ:", error);
        }
      }, 2000);
    });
    </script>
    


  <!-- ==================================================================================================== -->

  <%- include('./include/_footer') %>